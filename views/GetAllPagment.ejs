<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>addFundForm</title>
  
    
    <style>

             .navbar{
              display: flex;
              justify-content: space-between;
              align-items: center;
             }
             body{
              overflow: scroll;
             }
          
             a{
          color: white;
          text-decoration: none;
          padding: 0.6rem;
          border-radius: 0.3rem;
          background-color: green;
          position: relative;
          top: 0rem;
          left: 0.5rem;
      }
          
        
          
              input[type="search"] {
                padding: 10px;
                border-radius: 5px;
                outline: none;
                width: 250px;
              }
          
              table {
                border-collapse: collapse;
                width: 100%;
              }
              
              th, td {
                  white-space: nowrap;
                  padding: 10px;
                border: 1px solid #ddd;
                text-align: center;
              }
          .width{
              white-space: wrap;
          }
         
          
              .account-image {
                width: 100%;
                height: 100px;
                object-fit: cover;
              }
      
            </style>
              <style>
              @media (width < 1435px) {
                  .width{
              white-space: nowrap;
          }
              }
            </style>
    
</head>

<body>
    <div class="navbar">
        <a href="/admin/collection-ensureIndex/kira-yagami-082561-lira-Integrate-page-of-admin-931249/success" style="text-decoration: none;">Go to Home</a>
        <h2>Total Payment Details</h2>
        <input type="search" id="searchInput" onkeyup="searchTable()" placeholder="Enter Name | UserName | Email">
      </div>
    
       <table class="zigzag" id="userTable" >
        <thead>
            <br>
            <tr>
                <th class="header">Name</th>

                <th class="header">UserName</th>
                <th class="header">Email</th>
                <th class="header">Phone</th>
                <th class="header">Payment Metod</th>
                <th class="header">Description</th>
                <!-- <th class="header">Account Buy Check</th> -->
                <th class="header">TransitionId</th>
                <th class="header">Total Account Price</th>

                <th class="header">Date</th>

                <th class="header">Image</th>
            </tr>
        </thead>
        <tbody>
            <% accounts.forEach(account=> { %>
                <tr class="table-row">
                  <td class="col col-8"><%- account.name || '' %></td>

                  <td class="col col-8"><%- account.userName || '' %></td>
                  <td class="col col-2 width"><%- account.email || '' %></td>
                    <td class="col col-4"><%- account.phone || '' %></td>
                    <td class="col col-5"><%- account.paymentMethod || '' %></td>
                    <td class="col col-6 width"><%- account.description || '' %></td>
                    <!-- <td class="col col-6"><%- account.description || '' %></td> -->

                    <td class="col col-7"><%- account.transitionId || '' %></td>
                    <td class="col col-7"><%- account.totalAccountPrice || '' %></td>

                    <td class="col col-7 width"><%- account.transactionDate || '' %></td>

                    <td class="col col-9 " >
                        <% if (account.image) { %>
                            <img src="/Account/image/<%- account.image %>" alt="Account Image" class="account-image">
                            <% } else { %>
                                <img src="/uploads/placeholder.jpg" alt="Placeholder Image" class="account-image">
                                <% } %>
                    </td>
                    <% }); %>
        </tbody>
    </table>
</body>

<script>
  function searchTable() {
      const input = document.getElementById('searchInput');
      const filter = input.value.toUpperCase();
      const table = document.getElementById('userTable');
      const trs = table.getElementsByTagName('tr');

      for (let i = 0; i < trs.length; i++) {
          let match = false;
          const tds = trs[i].querySelectorAll('td:nth-child(1), td:nth-child(2), td:nth-child(3)'); // Selecting username and email cells

          for (let j = 0; j < tds.length; j++) {
              const td = tds[j];
              if (td) {
                  if (td.innerHTML.toUpperCase().indexOf(filter) > -1) {
                      match = true;
                      break;
                  }
              }
          }

          if (match) {
              trs[i].style.display = '';
          } else {
              trs[i].style.display = 'none';
          }
      }
  }
</script>

<script>
  // Count the total number of rows in the table
  var totalAccounts = document.querySelectorAll('#userTable tbody tr').length;

  // Update the content of the h2 element with the total count
  document.querySelector('h2').innerText = 'Total Add Fund Payment Details: ' + totalAccounts;
</script>



</html>
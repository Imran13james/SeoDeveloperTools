<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>All Users</title>
</head>

<body>
    <h1>All Users</h1>

    <% if (users.length> 0) { %>
        <div class="search-container">
            <input type="text" id="search-input" placeholder="Search users..." />
          </div>

        <table class="table">
            <thead class="table__thead">
                <tr class="table__head">
                    <th class="table__th">Collection</th>
                    <th class="table__th">Username</th>
                    <th class="table__th">Email</th>
                    <th class="table__th">Total Account Price</th>
                    <th class="table__th">Transition ID</th>
                    <th class="table__th">Payment Method</th>
                    <% if (users[0].collectionType==='SellerPaymentModel' ) { %>
                        <th class="table__th">Transaction Date</th>
                        <% } else { %>
                            <th class="table__th">Transaction Date</th>
                            <% } %>
                </tr>
            </thead>
            <tbody class="table__tbody">
                <% for (const user of users) { %>
                    <tr class="table__tr">
                        <td class="table__td table__mobile-title">
                            <%= user.collectionType %>
                        </td>
                        <td class="table__td table__mobile-title">
                            <%= user.userName %>
                        </td>
                        <td class="table__td table__mobile-title">
                            <%= user.email %>
                        </td>
                        <td class="table__td table__mobile-title">
                            <%= user.totalAccountPrice %>
                        </td>
                        <td class="table__td table__mobile-title">
                            <%= user.transitionId %>
                        </td>
                        <td class="table__td table__mobile-title">
                            <%= user.selectPaymentMethod %>
                        </td>

                        <% if (user.collectionType==='SellerPaymentModel' ) { %>
                            <td class="table__td table__mobile-title">
                                <%= user.transactionDate %>
                            </td>
                            <% } else { %>
                                <td class="table__td table__mobile-title">
                                    <%= user.transactionDate %>
                                </td>
                                <% } %>
                    </tr>
                    <% } %>
            </tbody>
        </table>

        <% if (users.length===0) { %>
            <p>No users found.</p>
            <% } %>

                <% } %>
</body>

</html>
<style>
    input[type="text"] {
        width: 100%;
        padding: 12px 20px;
        margin: 8px 0;
        box-sizing: border-box;
        border: 2px solid #04AA6D;
        border-radius: 4px;
    }

    .btn {
        background-color: #04AA6D;
        color: white;
        padding: 16px 32px;
        border: none;
        border-radius: 4px;
        cursor: pointer;
    }
</style>
<style>
    /* core styles for table */

    .table {
        width: 100%;
        border-spacing: 0;
        border-collapse: collapse;
        box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.12), 0 1px 2px 0 rgba(0, 0, 0, 0.24);
        background-color: var(--tableBgColor, #fff);
    }

    .table__thead {
        background-color: var(--tableTitleBgColor);
        color: var(--tableTitleTextColor);
    }

    .table__mobile-caption {
        display: none;
    }

    .table__td,
    .table__th {
        padding: var(--tableCellPadding, 20px);
        box-sizing: border-box;
    }

    @media screen and (min-width: 769px) {
        .table__tr:hover {
            background-color: var(--tableRowBgColorHover);
        }

        .table__td:first-child,
        .table__th:first-child {
            width: 30%;
            text-align: left;
        }

        .table__td,
        .table__th {
            text-align: center;
        }
    }

    @media screen and (max-width: 768px) {

        .table,
        .table__thead,
        .table__tbody,
        .table__tr {
            display: block;
        }

        .table__td {
            display: flex;
        }

        .table__head {
            display: none;
        }

        .table__mobile-title {
            background-color: var(--tableTitleBgColor);
            color: var(--tableTitleTextColor);
        }

        .table__td {
            border-bottom: 1px solid var(--tableSeparatorColor);
        }

        .table__td:last-of-type {
            border-bottom: none;
        }

        .table__mobile-caption,
        .table__value {
            display: block;
            width: 50%;
            box-sizing: border-box;
        }

        .table__mobile-caption {
            padding-right: 2%;
        }
    }

    /* demo styles for table */

    .table {
        --tableCellPadding: 2rem;
        --tableTitleBgColor: #5668ca;
        --tableTitleTextColor: #fff;
        --tableRowBgColorHover: #f0f0f0;
        --tableSeparatorColor: #eee;
    }

    /*
* demo page
*/

    @media screen and (min-width: 768px) {
        html {
            font-size: 62.5%;
        }
    }

    @media screen and (max-width: 767px) {
        html {
            font-size: 50%;
        }
    }
</style>

<script>
    const searchInput = document.getElementById('search-input');
    const tableBody = document.getElementsByClassName('table__tbody');
  console.log(searchInput)
    function debounce(func, delay) {
      let timeout;
      return function(...args) {
        clearTimeout(timeout);
        timeout = setTimeout(() => func.apply(this, args), delay);
      };
    }
  
    const searchUsers = debounce(() => {
      const searchTerm = searchInput.value.toLowerCase();
      const filteredUsers = users.filter(user => {
        const searchText = Object.values(user).join(' ').toLowerCase(); // Combine all user properties for search
        return searchText.includes(searchTerm);
      });
  
      tableBody.innerHTML = '';
      if (filteredUsers.length > 0) {
        filteredUsers.forEach(user => {
        });
      } else {
        tableBody.innerHTML = '<tr><td colspan="7">No users found based on your search.</td></tr>';
      }
    }, 250); 
  
    searchInput.addEventListener('input', searchUsers);
  </script>